===============================================================
Gadgetron Python and Matlab interfaces installation under Linux
===============================================================

NOTE: Python interface successfully tried on Lubuntu VM and Centos, 
Matlab interface on Centos only.

Install Boost, SWIG, and clone+install Ismsmrd and Gadgetron from 
github.com/CCPPETMR. DO NOT CHANGE DEFAULT FOLDERS.

If you have installed the Gadgetron liraries in non-default folder, 
or where your linker doesn't find it, add this folder to LIBRARY_PATH 
and LD_LIBRARY_PATH.

Create folder 'build' with subfolders 'iUtilities' and 'xGadgetron'.

Clone iUtilities from github.com/CCPPETMR/iUtilties into your work
folder, referred to below as <work_dir>:

  git clone https://github.com/CCPPETMR/iUtilities

Clone xGadgetron from github.com/CCPPETMR/xGadgetron into <work_dir>:

  git clone https://github.com/CCPPETMR/xGadgetron

Set the following environment variables:
(Note that SRC_PATH and BUILD_PATH are required for the demos as well as installation.)

Variable name              Variable value

PYINCLUDE                  Path to python include folder (e.g. 
                           /usr/include/python2.7)
PYLIBPATH                  Path to python shared libraries (e.g. 
                           /usr/lib/python2.7/config-x86_64-linux-gnu)
PYTHON                     Python version (e.g. python2.7)
SRC_PATH                   Path to <work_dir>
BUILD_PATH                 Path to folder 'build'
MATLABROOT                 Path to Matlab root folder
GCC                        Fullname (i.e. including the path) of gcc-4.7 
                           compiler executable (newer versions of gcc are 
                           not supported by Matlab)
HDF5_DISABLE_VERSION_CHECK 2
LD_PRELOAD                 /lib64/libstdc++.so.6

Go to <work_dir>/iUtilities and run make.

Go to <work_dir>/xGadgetron/cGadgetron and run make.

Go to <work_dir>/xGadgetron/pGadgetron and run make. 
(Mac OS users may have to change -lboost_thread to -lboost_thread-mt in the Makefile.)

Go to <work_dir>/xGadgetron/mGadgetron and run make.
(Currently failing on Mac.)

Go to <work_dir>/xGadgetron/examples and run make. 

Open a new Linux terminal and run gadgetron there.

Add <work_dir>/xGadgetron/mGadgetron to Matlab path.

Go to <work_dir>/xGadgetron/examples and run demos.

=======================================================================
Gadgetron Matlab interface installation under Windows and Visual Studio
for using with a Linux Virtual Machine running Gadgetron
=======================================================================

Install Boost, SWIG and Ismsmrd.

Clone iUtilities from github.com/CCPPETMR/iUtilties into <work_dir>:

  git clone https://github.com/CCPPETMR/iUtilities

Build iUtilities x64/Release solution in <work_dir>/iUtilities folder
(make sure you have "Release" in "Solution Configurations" box and "x64" 
in "Solution Platforms" box).

Clone xGadgetron from github.com/CCPPETMR/xGadgetron into <work_dir>:

  git clone https://github.com/CCPPETMR/xGadgetron

Click Start -> Control Panel -> System and Security -> System -> 
Advanced System Settings -> Environment Variables
and add the following user variables:

Variable name    Variable value

BOOST            Path to Boost include folder (e.g. C:\Boost\boost_1_59_0)
BOOST_LIB        Path to Boost libraries folder
BOOST_SUFFIX     Common part of boost libraries names (e.g.-vc120-mt-1_58.lib)
ISMRMRD_INCLUDE  Path to Ismrmrd include folder
ISMRMRD_LIB      Path to Ismrmrd library folder
ISMRMRD_LIBRARY  Ismrmrd library name
PATH2FFTW        Path to FFTW3 library (e.g. C:\FFTW-3.3.4)
IUTILITIES       <work_dir>/iUtilities
CGADGETRON       <work_dir>/xGadgetron/cGadgetron

Build cGadgetron x64/Release solution in <work_dir>/xGadgetron/cGadgetron
(make sure you have "Release" in "Solution Configurations" box and "x64" 
in "Solution Platforms" box).

Start Matlab.

Run mex_gadgetron.m (in <work_dir>/xGadgetron/mGadgetron).

Add <work_dir>/xGadgetron/mGadgetron to Matlab path.

In <work_dir>/xGadgetron/examples execute

   <ismrmrd_root>\utilities\Release\ismrmrd_generate_cartesian_shepp_logan.exe -r 2

to create the input file for demos.

Start Virtual Machine.

Forward port 9002 to VM (in Oracle VM VirtualBox Manager: go to Settings->Network,
click on Port Forwarding, add new forwarding rule by clicking on +, set Host Port
and Guest Port to 9002).

Open a new Linux terminal and run gadgetron there.

Run Matlab demos.

